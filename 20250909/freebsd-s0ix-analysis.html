<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&family=LXGW+WenKai+Mono+TC&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/layout.css">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
    <title>FreeBSD S0ix 探索modern standy電腦電源管理 - 深度分析報告</title>
</head>
<body>
    <div class="gradient-bg"></div>
    
    <div class="controls">
        <button class="control-btn" onclick="toggleLayout()" title="切換佈局 (Mobile/PC)" id="layout-btn">📱</button>
        <button class="control-btn" onclick="toggleZoom()" title="縮放">🔍</button>
        <button class="control-btn" onclick="toggleEffects()" title="特效">✨</button>
        <button class="control-btn" onclick="toggleTOC()" title="目錄">📋</button>
    </div>

    <!-- 目錄 -->
    <div class="toc" id="toc">
        <h3>📋 目錄</h3>
        <ul>
            <li><a href="#executive-summary">📊 執行摘要</a></li>
            <li><a href="#background">🌟 背景</a></li>
            <li><a href="#outline-charts">📈 概念大綱與流程圖</a></li>
            <li><a href="#themes-conclusions">📝 主題與結論</a></li>
            <li><a href="#core-arguments">💎 核心論點卡片</a></li>
            <li><a href="#detailed-discussion">📖 詳細論述</a></li>
        </ul>
    </div>

    <div class="container">
        <header class="header">
            <h1 data-id="main-title">FreeBSD S0ix 現代待機實現</h1>
            <p class="subtitle" data-source-line="1">深度分析報告 - 探索modern standy電腦電源管理的未來</p>
            <div id="layout-indicator" style="margin-top: 15px; padding: 8px 16px; background: rgba(102, 126, 234, 0.1); border-radius: 20px; display: inline-block; font-size: 0.9em; color: #667eea;">
                📱 Mobile Layout (預設)
            </div>
        </header>

        <main class="content" id="main-content">
            <!-- 執行摘要 -->
            <section class="section" data-source-line="3" data-id="executive-summary">
                <h2 id="executive-summary" data-source-line="3">📊 執行摘要</h2>
                
                <div class="key-point" data-source-line="5">
                    <p data-source-line="5">本報告旨在闡述 FreeBSD 作業系統上實現 S0ix (S0i3/S0ax) 現代待機模式的必要性、進展與挑戰。鑑於傳統 ACPI S3 睡眠模式在現代筆記型電腦中已逐漸被淘汰，且存在速度慢、不靈活的缺點，開發者正積極推動 S0ix 作為更高效能、更優雅的低功耗解決方案。</p>
                </div>

                <div class="card" data-source-line="5">
                    <p data-source-line="5">目前，FreeBSD 在 AMD 平台上的 S0ix 實施已取得顯著進展，特別是在 CPU C 狀態管理和 USB4 裝置關閉方面，但仍面臨核心恐慌、穩定性問題及 Intel 平台與通用 USB-C/Thunderbolt 擴充座支援不足等挑戰。此項目由 FreeBSD 基金會資助，是其筆記型電腦項目的一部分，對提升 FreeBSD 在現代硬體上的使用者體驗至關重要。</p>
                </div>
            </section>

            <!-- 背景 -->
            <section class="section" data-source-line="7" data-id="background">
                <h2 id="background" data-source-line="9">🌟 背景</h2>

                <div class="column-layout" data-source-line="9">
                    <div class="column">
                        <h3 data-source-line="9">⏰ 時間與領域</h3>
                        <p data-source-line="9">本報告內容基於近年來（從 2018 年 Intel 的相關工作開始，FreeBSD 的工作也在積極進行中）在作業系統電源管理領域，特別是針對現代筆記型電腦硬體的發展。討論的重點是 FreeBSD 作業系統如何適應這些新的硬體電源管理標準。</p>
                    </div>

                    <div class="column">
                        <h3 data-source-line="10">👥 受眾</h3>
                        <p data-source-line="10">本報告的目標受眾包括 FreeBSD 開發者、資深使用者、硬體工程師以及任何對作業系統電源管理和現代筆記型電腦技術感興趣的人士。</p>
                    </div>
                </div>

                <div class="example-section" data-source-line="11">
                    <h4>⚠️ 核心問題</h4>
                    <ul>
                        <li data-source-line="12"><span class="highlight">ACPI S3 的過時：</span> 長久以來，電腦使用 ACPI S3 (Suspend-to-RAM，暫停到記憶體) 作為主要的睡眠模式。然而，S3 被認為是一種「重手」的方法，進入和退出速度慢，且缺乏彈性。</li>
                        <li data-source-line="13"><span class="highlight">現代硬體不支援：</span> 許多現代筆記型電腦，例如較新的 AMD Frameworks 或最新的 Intel Frameworks，已不再支援 S3。這對筆記型電腦而言是個重大問題，因為它們無法有效地進入睡眠狀態以節省電力。</li>
                    </ul>
                </div>

                <div class="card" data-source-line="14">
                    <h4>🎯 目標</h4>
                    <ul>
                        <li data-source-line="15"><span class="blue-emphasis">實施 S0ix：</span> 在 FreeBSD 上實現 S0ix (S0i3/S0ax，現代待機) 模式，作為 S3 的替代方案，使現代筆記型電腦能夠正確進入低功耗睡眠狀態並節省電力。</li>
                        <li data-source-line="16"><span class="green-emphasis">提升使用者體驗：</span> 解決筆記型電腦在 FreeBSD 上無法正常睡眠的問題，提升其作為日常使用作業系統的實用性。</li>
                    </ul>
                </div>

                <div class="example-section" data-source-line="17">
                    <h4>⚠️ 限制與假設</h4>
                    <ul>
                        <li data-source-line="18"><span class="orange-emphasis">硬體依賴：</span> S0ix 的實現高度依賴底層硬體的 ACPI 資訊和廠商特定的電源管理單元（如 AMD SMU）。</li>
                        <li data-source-line="19"><span class="purple-emphasis">廠商差異：</span> Intel 和 AMD 平台在實現 S0ix 上存在差異，需要不同的驅動程式和方法。</li>
                        <li data-source-line="20"><span class="red-emphasis">複雜性：</span> S0ix 涉及多個層面（CPU 狀態、裝置狀態、中斷處理、USB4 管理）的協調，開發工作量巨大。</li>
                        <li data-source-line="21"><span class="highlight">偵錯挑戰：</span> 由於硬體的多樣性和潛在的廠商特定行為，偵錯和測試極具挑戰性。</li>
                    </ul>
                </div>
            </section>

            <!-- 概念大綱與流程圖 -->
            <section class="section" data-source-line="23" data-id="outline-charts">
                <h2 id="outline-charts" data-source-line="23">📈 概念大綱與流程圖</h2>

                <p data-source-line="25">要讓 FreeBSD 系統進入 S0ix 狀態，涉及一系列協調的步驟，可概括為以下流程：</p>

                <div class="mermaid" data-source-line="25">
graph TD
    A[使用者發出睡眠指令] --> B[系統進入現代待機預處理]
    B --> C[CPU 閒置化 - S2idle]
    C --> D[CPU 深度閒置 - C-states]
    D --> E[裝置電源狀態管理 - D-states]
    E --> F[USB4 連線管理器處理]
    F --> G[系統進入 S0i3]
    G --> H[系統喚醒與恢復]
    
    subgraph 關鍵步驟
        I[SPMC 透過 EC 發出通知]
        J[停止排程器時鐘]
        K[禁用非 SCI 中斷]
        L[AMD SMU 發送睡眠提示]
        M[設定 USB4 SLP 位元]
    end
    
    B --> I
    C --> J
    C --> K
    D --> L
    F --> M
                </div>

                <div class="card" data-source-line="27">
                    <h3>🔄 詳細流程步驟</h3>
                    <ol>
                        <li data-source-line="27"><span class="blue-emphasis">使用者發出睡眠指令：</span> 例如，按下電源按鈕或關閉筆記型電腦螢幕。</li>
                        <li data-source-line="30"><span class="green-emphasis">系統進入現代待機預處理：</span> SPMC 透過內嵌控制器 (EC) 發出「進入睡眠」通知。EC 可能會透過閃爍電源按鈕等方式向使用者發出睡眠指示。</li>
                        <li data-source-line="35"><span class="purple-emphasis">CPU 閒置化 (S2idle)：</span> 將排程器綁定到 CPU 0，停止所有 CPU 上的排程器時鐘，「踢動」所有 CPU 進入閒置狀態。</li>
                        <li data-source-line="43"><span class="orange-emphasis">CPU 深度閒置 (C-states)：</span> 平台要求所有 CPU 進入深度閒置狀態（如 C-states，例如 C4）。在 AMD 平台，需要透過 AMD SMU 發送提示進入/退出睡眠的命令。</li>
                        <li data-source-line="49"><span class="red-emphasis">裝置電源狀態管理 (D-states)：</span> 尊重 SPMC 提供的裝置約束列表，將不必要的裝置置於低功耗 D-state。</li>
                        <li data-source-line="52"><span class="highlight">USB4 連線管理器：</span> 這是關鍵且複雜的部分。需要一個 USB4 連線管理器來將 USB4 路由器設定為睡眠狀態。</li>
                        <li data-source-line="55"><span class="blue-emphasis">系統進入 S0i3：</span> 當所有條件滿足時，AMD SMU 將指示系統進入 S0i3。</li>
                        <li data-source-line="59"><span class="green-emphasis">系統喚醒與恢復：</span> 系統透過 SCI 中斷從閒置狀態喚醒，恢復所有中斷和排程器時鐘。</li>
                    </ol>
                </div>
            </section>

            <!-- YouTube 連結與縮圖 -->
            <section class="section" data-source-line="32" data-id="youtube-link">
                <div class="card" data-source-line="32">
                    <h3>🎥 相關影片資源</h3>
                    <div class="link-preview" data-source-line="33">
                        <a href="https://youtu.be/RCjPc4X2Edc?list=TLGGAM6FyKRY3jcwOTA5MjAyNQ" target="_blank" class="youtube-link">
                            <div class="link-thumbnail">
                                <img src="https://img.youtube.com/vi/RCjPc4X2Edc/maxresdefault.jpg" alt="YouTube 影片縮圖" style="width: 100%; height: auto; border-radius: 8px;">
                            </div>
                            <div class="link-info">
                                <h4>FreeBSD S0ix 實現相關技術討論</h4>
                                <p>點擊觀看詳細的技術實現討論</p>
                                <span class="link-url">https://youtu.be/RCjPc4X2Edc</span>
                            </div>
                        </a>
                    </div>
                </div>
            </section>

            <!-- 主題與結論 -->
            <section class="section" data-source-line="64" data-id="themes-conclusions">
                <h2 id="themes-conclusions" data-source-line="64">📝 主題與結論</h2>

                <div class="key-point" data-source-line="66">
                    <h3>🎯 核心主題：FreeBSD 如何克服技術挑戰以實現 S0ix 現代待機模式</h3>
                    <p data-source-line="66">本報告的核心主題是 <span class="highlight">FreeBSD 如何克服技術挑戰以實現 S0ix 現代待機模式，特別是在 AMD 筆記型電腦和 USB4 整合方面</span>。</p>
                </div>

                <div class="example-section" data-source-line="69">
                    <h4>💡 S0ix 的初始進入方式</h4>
                    <p data-source-line="69"><span class="blue-emphasis">S0ix 的初始進入與 S3 模式類似，通常需要使用者手動發出睡眠指令或進行特定操作才能啟動。</span></p>

                    <div class="column-layout" data-source-line="73">
                        <div class="column">
                            <h5>傳統 S3 模式的進入方式</h5>
                            <p data-source-line="74">傳統的 ACPI S3 (Suspend-to-RAM，暫停到記憶體) 模式是一種「重手」的方法，使用者會直接「告訴電腦：進入睡眠」。這清楚表明 S3 模式是由使用者手動觸發的。</p>
                        </div>

                        <div class="column">
                            <h5>S0ix 模式的初始進入方式</h5>
                            <p data-source-line="76">儘管 S0ax (S0ix 中的一種) 的定義指出，它是在系統保持在 S0 (工作狀態) 時，「由您的平台決定何時滿足要求以進入 S0ix 狀態並關閉 CPU」。然而，在實際操作中，要啟動 S0ix 需要使用者發出「進入暫停」的意圖。</p>
                        </div>
                    </div>
                </div>

                <div class="card" data-source-line="82">
                    <h4>🔍 「平台決定」的涵義</h4>
                    <p data-source-line="82">「平台決定何時滿足要求以進入 S0ix 狀態並關閉 CPU」 這句話，並非指由平台自動判斷 CPU 閒置時就自行進入。相反，它指的是在使用者啟動暫停程序後，系統的 <span class="purple-emphasis">SPMC (System Power Management Controller，系統電源管理控制器)</span> 會通知內嵌控制器 (EC)「何時是開始進入睡眠的時間點」。</p>
                </div>

                <div class="key-point" data-source-line="85">
                    <p data-source-line="85"><span class="highlight">總結來說，S0ix 的初始進入需要使用者手動下達睡眠指令（例如按下電源按鈕或關閉螢幕蓋）來啟動暫停程序。一旦程序啟動，系統平台便會接手，智慧地協調 CPU 和裝置的電源狀態，使其進入 S0ix 的低功耗狀態。</span></p>
                </div>

                <div class="example-section" data-source-line="87">
                    <h4>📊 主要結論</h4>
                    <ul>
                        <li data-source-line="89"><span class="blue-emphasis">S0ix 的必要性：</span> S0ix 是現代筆記型電腦實現高效能電源管理的關鍵，因傳統 S3 模式已過時且不被新硬體支援。</li>
                        <li data-source-line="90"><span class="green-emphasis">初步成功：</span> 開發者已在 FreeBSD 上為 AMD 平台實現了 S0ix 的基本功能，證明了其可行性。現在可以透過 AMD SMU 輸出確認 CPU 和 USB4 裝置已進入低功耗狀態，並記錄 S0i3 駐留時間。</li>
                        <li data-source-line="91"><span class="orange-emphasis">當前挑戰：</span> 儘管有進展，但該實施仍處於早期階段，存在大量錯誤，特別是與 USB4 相關的問題，包括隨機核心恐慌和系統喚醒後無法重新進入 S0ix 的情況。</li>
                        <li data-source-line="92"><span class="purple-emphasis">複雜的整合工作：</span> S0ix 的實現不僅需要對 CPU 閒置狀態（C-states）和裝置功耗狀態（D-states）進行精細控制，還需要開發新的驅動程式來與特定硬體（如 AMD SMU）互動。</li>
                        <li data-source-line="93"><span class="red-emphasis">未來展望：</span> 該項目正在積極修復現有問題，並規劃擴展支援範圍，包括 Intel 平台、S4 (休眠) 模式、更複雜的喚醒規則以及將 Powertop 等工具移植到 FreeBSD。</li>
                    </ul>
                </div>
            </section>

            <!-- 核心論點卡片 -->
            <section class="section" data-source-line="95" data-id="core-arguments">
                <h2 id="core-arguments" data-source-line="95">💎 核心論點卡片</h2>

                <p data-source-line="97">以下是關於 FreeBSD 上 S0ix 實施的核心論點，每個論點都包含了定義、方法/步驟和相關範例。</p>

                <!-- 論點一 -->
                <div class="argument-card" data-source-line="99">
                    <h3 id="argument-1" data-source-line="99">💭 論點一：從 S3 到 S0ix 的過渡是現代筆記型電腦的必然選擇</h3>
                    <div class="argument-content">
                        <div class="argument-section">
                            <h4>🔍 定義</h4>
                            <p data-source-line="101"><span class="blue-emphasis">ACPI S3 (Suspend-to-RAM)</span> 是傳統的深度睡眠模式，將系統置於低功耗狀態，但進入和退出速度慢，且不靈活。<span class="green-emphasis">S0ix (S0i3/S0ax)</span> 是一種現代待機模式，系統在 S0 運行狀態下，由平台動態判斷並進入更精細的低功耗狀態，以實現高效節能。</p>
                        </div>
                        <div class="argument-section">
                            <h4>⚙️ 方法/步驟</h4>
                            <p data-source-line="102">由於現代筆記型電腦已不再支援 S3，必須轉向 S0ix 來實現適當的睡眠功能。S0ix 允許平台（而不是作業系統）在滿足特定電源要求時決定何時關閉 CPU 和其他元件。</p>
                        </div>
                        <div class="argument-section">
                            <h4>📝 範例</h4>
                            <p data-source-line="103">新的 AMD Frameworks 和最新的 Intel Frameworks 筆記型電腦已移除 S3 支援，若無 S0ix，則無法進入睡眠狀態，這對於筆記型電腦的使用體驗造成嚴重問題。</p>
                        </div>
                    </div>
                </div>

                <!-- 論點二 -->
                <div class="argument-card" data-source-line="105">
                    <h3 id="argument-2" data-source-line="105">🏗️ 論點二：ACPI 是現代電源管理策略的基礎</h3>
                    <div class="argument-content">
                        <div class="argument-section">
                            <h4>🔍 定義</h4>
                            <p data-source-line="107"><span class="purple-emphasis">ACPI (Advanced Configuration and Power Interface)</span> 是一個開放標準，定義了作業系統如何發現和配置電腦硬體，以及如何管理其電源。平台透過一種稱為 <span class="orange-emphasis">AML (ACPI Machine Language)</span> 的配置語言暴露硬體資訊，並可從 <span class="blue-emphasis">ASL (ACPI Source Language)</span> 編譯而來。</p>
                        </div>
                        <div class="argument-section">
                            <h4>⚙️ 方法/步驟</h4>
                            <p data-source-line="108">作業系統利用 ACPI 提供的資訊和方法來查詢硬體狀態（例如螢幕蓋是否開啟）並控制裝置的電源行為。這使得作業系統無需「碰巧知道」硬體位址，而是透過標準化的介面進行溝通。</p>
                        </div>
                        <div class="argument-section">
                            <h4>📝 範例</h4>
                            <p data-source-line="109">透過 ACPI，系統可以查詢筆記型電腦的螢幕蓋裝置 (lid device)，判斷其開啟或關閉狀態，並據此觸發睡眠或喚醒事件。SPMC 暴露了裝置特定的方法，例如 `get device constraint`，用於獲取設備電源約束。</p>
                        </div>
                    </div>
                </div>

                <!-- 論點三 -->
                <div class="argument-card" data-source-line="111">
                    <h3 id="argument-3" data-source-line="111">⚡ 論點三：實現 S0ix 需要協調 CPU 與裝置的電源狀態</h3>
                    <div class="argument-content">
                        <div class="argument-section">
                            <h4>🔍 定義</h4>
                            <p data-source-line="113"><span class="blue-emphasis">S2idle (Suspend to Idle)</span> 是讓所有 CPU 進入閒置狀態的過程，這是進入 S0ix 的先決條件。<span class="green-emphasis">C-states (CPU Power States)</span> 是 CPU 處理器的低功耗閒置狀態，從 C0（活動）到更深的 C-states（如 C4）。<span class="purple-emphasis">D-states (Device Power States)</span> 是個別裝置的功耗狀態，從 D0（開啟）到 D3 cold（無電源）。</p>
                        </div>
                        <div class="argument-section">
                            <h4>⚙️ 方法/步驟</h4>
                            <ol data-source-line="114">
                                <li><span class="orange-emphasis">CPU 閒置化：</span> 首先，所有 CPU 必須進入閒置狀態。這涉及將任務綁定到 CPU 0、停止排程器時鐘，並使 CPU 進入 S2idle 循環，禁用所有非喚醒 SCI 中斷。</li>
                                <li><span class="red-emphasis">CPU 深度睡眠：</span> 平台需要 CPU 進入深度 C-states。傳統上，這可能透過 `MWAIT` 指令實現，但在 AMD 平台上不適用。需要透過 ACPI 的 CST 物件讀取特定暫存器以促使 CPU 進入所需的 C-state。</li>
                                <li><span class="highlight">裝置斷電：</span> 其次，系統需要將非必要的裝置置於低功耗 D-states (例如 D3 cold)，以減少總體功耗。這透過檢查並滿足 SPMC 提供的裝置電源約束來實現。</li>
                            </ol>
                        </div>
                        <div class="argument-section">
                            <h4>📝 範例</h4>
                            <p data-source-line="118">當 NVMe 裝置的電源資源 `P0NV` 關閉時，該裝置將處於 D3 cold 狀態 (關閉且不接收電源)；當其開啟時，則處於 D0 狀態 (開啟)。在掛起 ACPI CPU 裝置時，會呼叫 `disable idle` 函數，這目前會阻止 C-state 進入，需要特殊處理。</p>
                        </div>
                    </div>
                </div>

                <!-- 論點四 -->
                <div class="argument-card" data-source-line="120">
                    <h3 id="argument-4" data-source-line="120">🔧 論點四：AMD 平台對 S0ix 支援需要特定的 SMU 互動</h3>
                    <div class="argument-content">
                        <div class="argument-section">
                            <h4>🔍 定義</h4>
                            <p data-source-line="122"><span class="red-emphasis">AMD SMU (System Management Unit)</span> 是 AMD CPU 內部的一個專用單元，運行 <span class="blue-emphasis">PMFW (Power Management Firmware)</span>，負責所有 CPU 級別的電源管理，包括決定何時進入 S0i3。<span class="green-emphasis">駐留時間 (Residency)</span> 是測量系統在特定電源狀態下花費時間的指標，對於驗證 S0i3 進入非常有用。</p>
                        </div>
                        <div class="argument-section">
                            <h4>⚙️ 方法/步驟</h4>
                            <ul data-source-line="124">
                                <li>由於 `MWAIT` 指令在 AMD 平台上無法有效促使 CPU 進入 S0i3，因此需要開發專門的 AMD SMU 驅動程式來與 PMFW 互動。</li>
                                <li>該驅動程式可透過 `sysctls` 提供駐留時間統計，顯示 CPU 在不同狀態下停留的時間。</li>
                                <li>必須向 SMU 發送「正在進入/退出睡眠」的提示命令，否則系統永遠不會進入 S0i3。</li>
                            </ul>
                        </div>
                        <div class="argument-section">
                            <h4>📝 範例</h4>
                            <p data-source-line="127">在沒有適當 SMU 互動的情況下，SMU 顯示 CPU 在「SW drips」狀態下保持活躍，且 USB 裝置（例如 USB 3.1 和 USB 3.0，實際上與 USB4 相關）保持活躍，從而阻止 S0i3 進入。透過正確的 SMU 提示和 USB4 管理，SMU 會顯示 CPU 不再活躍，並報告 S0i3 中的時間。</p>
                        </div>
                    </div>
                </div>

                <!-- 論點五 -->
                <div class="argument-card" data-source-line="129">
                    <h3 id="argument-5" data-source-line="129">🔌 論點五：USB4 整合對 S0ix 的實現至關重要且複雜</h3>
                    <div class="argument-content">
                        <div class="argument-section">
                            <h4>🔍 定義</h4>
                            <p data-source-line="131"><span class="purple-emphasis">USB4 (Universal Serial Bus 4)</span> 是一種新一代的連接標準，不僅支援 USB 資料傳輸，還可以「隧道化」其他協議，如 USB 3.2、DisplayPort 和 PCI Express。<span class="orange-emphasis">主機路由器 (Host Router)</span> 是 USB4 網路的核心，負責這些協議的路由。<span class="blue-emphasis">Pre-OS 連線管理器 (Pre-OS Connection Manager)</span> 是 BIOS 中用於在作業系統啟動前啟用 USB4 的機制。</p>
                        </div>
                        <div class="argument-section">
                            <h4>⚙️ 方法/步驟</h4>
                            <ul data-source-line="133">
                                <li>由於 BIOS 中的 Pre-OS 連線管理器，USB4 路由器在作業系統啟動時可能不會處於 D3 狀態，這會阻止 S0ix 進入。</li>
                                <li>需要開發一個 FreeBSD 上的 USB4 連線管理器，該管理器是完全由作業系統端 (OS-side) 控制的 <span class="highlight">HTM (Host Connection Manager，主機連線管理器)</span>，而非舊的內部連線管理器 (ICM)。</li>
                                <li>該管理器需要能夠透過在路由器的配置空間中設定 <span class="red-emphasis">SLP bit (睡眠位元)</span>，然後等待 <span class="green-emphasis">Sleep Ready bit (睡眠就緒位元)</span> 設定，以確保 USB4 裝置進入睡眠狀態。</li>
                            </ul>
                        </div>
                        <div class="argument-section">
                            <h4>📝 範例</h4>
                            <p data-source-line="136">在 USB4 處理完成之前，AMD SMU 會報告 USB 3.1 和 USB 3.0 (實際為 USB4 相關) 裝置仍處於活動狀態，從而阻止 S0i3 進入。成功實施 USB4 路由器睡眠後，SMU 報告相關 USB4 裝置狀態為零，系統才能進入 S0i3。目前僅支援 Pink Sardine 控制器（AMD 7000 系列筆記型電腦中），需要更多通用支援。</p>
                        </div>
                    </div>
                </div>

                <!-- 論點六 -->
                <div class="argument-card" data-source-line="138">
                    <h3 id="argument-6" data-source-line="138">⚠️ 論點六：FreeBSD 上 S0ix 的當前實現面臨重大挑戰與限制</h3>
                    <div class="argument-content">
                        <div class="argument-section">
                            <h4>🔍 定義</h4>
                            <p data-source-line="140">S0ix 實施中的「挑戰」指的是當前存在的技術問題、錯誤和未完成的功能。「限制」指的是在廣泛支援和穩定性方面的不足。</p>
                        </div>
                        <div class="argument-section">
                            <h4>⚙️ 方法/步驟</h4>
                            <p data-source-line="141">透過廣泛的測試（包括應用補丁、設置 ACPI 電源按鈕狀態為 S2idle，並提供 `dmesg`、`ACPI dumpdt` 和 AMD SMU 內容進行診斷），開發者正在識別和修復問題。</p>
                        </div>
                        <div class="argument-section">
                            <h4>📝 範例</h4>
                            <ul data-source-line="142">
                                <li><span class="red-emphasis">穩定性問題：</span> 目前的實施存在許多錯誤，尤其是與 USB4 相關，包括頻繁的隨機核心恐慌。</li>
                                <li><span class="orange-emphasis">喚醒後無法重新進入睡眠：</span> USB4 路由器在喚醒後無法重新進入睡眠狀態，這是一個待解決的嚴重問題。</li>
                                <li><span class="purple-emphasis">Intel 支援缺失：</span> 目前的工作主要集中在 AMD 平台，Intel 平台的支持尚未完成，儘管可能部分工作。</li>
                                <li><span class="blue-emphasis">缺乏複雜喚醒規則：</span> 尚未提供使用者新增複雜喚醒規則的能力，例如指定特定裝置是否能喚醒系統。</li>
                                <li><span class="green-emphasis">通用擴充座支援缺失：</span> 支援通用的 USB-C 或 Thunderbolt 擴充座（涉及 DisplayPort、USB 和 PCI over USB4 隧道化）仍完全缺失，需要大量工作。</li>
                                <li><span class="highlight">S4 支援：</span> 儘管 S4 (休眠) 可實現更徹底的省電，但其進入和退出時間長，尚未完全整合到 S0ix 的功耗管理策略中。</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 詳細論述 -->
            <section class="section" data-source-line="150" data-id="detailed-discussion">
                <h2 id="detailed-discussion" data-source-line="150">📖 詳細論述</h2>

                <div class="detailed-section" data-source-line="153">
                    <h3 id="detailed-1" data-source-line="153">🔄 使用者是否需手動進入現代待機 (Modern Standby) 模式以實現 S0ix 省電？</h3>

                    <div class="key-point" data-source-line="155">
                        <p data-source-line="155">是的，使用者需要手動觸發才能讓系統進入現代待機 (S0ix) 模式，這與傳統的 S3 睡眠模式類似。</p>
                    </div>

                    <ul data-source-line="157">
                        <li data-source-line="157">傳統上，S3 睡眠模式需要使用者「告訴電腦進入睡眠」。</li>
                        <li data-source-line="158">對於 S0ix 模式，雖然其核心機制是「由您的平台決定何時滿足要求以進入 S0ix 狀態並關閉 CPU」，但這是在使用者啟動暫停程序之後的平台內部協調過程。</li>
                        <li data-source-line="159">來源明確指出，為了「實際使用」S0ix 模式，您可以將 <span class="blue-emphasis">ACPI 電源按鈕狀態設定為 S2 idle</span> (暫停到閒置，這是進入 S0ix 的一個前置步驟)，這表示當您按下電源按鈕時，系統將進入 S2 idle 模式。</li>
                        <li data-source-line="160">因此，使用者透過按下電源按鈕或關閉筆記型電腦螢幕蓋等操作，來發出「希望系統進入暫停狀態」的指令，從而啟動 S0ix 的進入流程。</li>
                    </ul>
                </div>

                <div class="detailed-section" data-source-line="162">
                    <h3 id="detailed-2" data-source-line="162">⚡ S0ix 模式與 S3 模式相比，進入和退出速度是否較快？</h3>

                    <div class="key-point" data-source-line="164">
                        <p data-source-line="164"><span class="highlight">S0ix 模式的設計目的是為了克服 S3 模式的缺點，其中就包括 S3「進入和退出速度慢」的問題，因此 S0ix 理應在速度上有所提升或至少解決了 S3 的慢速問題。</span></p>
                    </div>

                    <ul data-source-line="166">
                        <li data-source-line="166">來源資料明確指出，ACPI S3 模式有幾個缺點，包括它「進入和退出速度慢，而且很不靈活」。</li>
                        <li data-source-line="167">S0ix (特別是 S0ax 或 S0i3) 是作為 S3 的替代方案而提出的，因為「許多現代筆記型電腦已不再支援 S3」。 S0ix 的出現正是為了解決 S3 在現代硬體上的侷限性，包括其速度問題。</li>
                        <li data-source-line="168">在功耗方面，S0ix (S0i3) 的預期功耗與 S3 模式「應該是相同的」，兩者都是將所有元件關閉，但記憶體仍然保持活躍 (suspending to memory)。</li>
                        <li data-source-line="169">但 S0ix 的優勢在於其「平台決定」的靈活性，這允許更精細和更快的狀態轉換，以避免 S3 模式的「重手」和慢速進入/退出問題。</li>
                    </ul>

                    <p data-source-line="171">總結來說，S0ix 模式的開發目標之一就是為現代筆記型電腦提供一個更高效、更靈活的睡眠解決方案，以改善 S3 模式進入和退出速度慢的缺點。</p>
                </div>

                <!-- 從 S3 到 S0ix 的過渡：現代電源管理的必然趨勢 -->
                <div class="detailed-section" data-source-line="173">
                    <h3 id="s3-to-s0ix-transition" data-source-line="173">🔄 從 S3 到 S0ix 的過渡：現代電源管理的必然趨勢</h3>

                    <div class="card" data-source-line="175">
                        <p data-source-line="175">傳統的 ACPI S3 睡眠模式，儘管長期以來是電腦電源管理的基石，但其「重手」的設計已無法滿足現代筆記型電腦對快速響應和靈活性的需求。S3 模式下，記憶體之外的所有組件幾乎完全斷電，導致系統進入和退出睡眠都較為緩慢。更重要的是，許多新型硬體平台，特別是 AMD Frameworks 和最新的 Intel Frameworks 筆記型電腦，已不再支援 S3。</p>
                    </div>

                    <div class="example-section" data-source-line="177">
                        <p data-source-line="177">為了解決這個問題，<span class="highlight">S0ix (S0i3/S0ax)</span> 模式應運而生。S0ix 的核心思想是系統在邏輯上保持在 <span class="blue-emphasis">S0 (工作狀態)</span>，但由平台（而非作業系統強制）智慧地判斷何時滿足條件，逐步關閉 CPU 和其他裝置，進入深度低功耗狀態。這種方法提供了更大的彈性，理論上可以實現比 S3 更快的喚醒速度，同時達到相似的節能效果。</p>
                    </div>
                </div>

                <!-- ACPI S3 vs S0ix 比較 -->
                <div class="detailed-section" data-source-line="254">
                    <h3 id="s3-vs-s0ix-comparison" data-source-line="254">📊 ACPI S3 vs S0ix 模式比較</h3>

                    <div class="card" data-source-line="256">
                        <h4>ACPI S3 (Suspend-to-RAM) 模式流程圖</h4>
                        <div class="mermaid" data-source-line="258">
graph TD
    A[使用者手動觸發睡眠] --> B{系統進入 S3 狀態}
    B --> C[記憶體保持供電]
    B --> D[除記憶體外，所有其他組件斷電]
    D --> E[系統進入低功耗狀態]
    E --> F{等待喚醒事件}
    F -- 喚醒事件發生 --> G[系統從記憶體恢復狀態]
    G --> H[所有斷電組件恢復供電/功能]
    H --> I[系統恢復工作狀態]

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#ccf,stroke:#333,stroke-width:1px
    style D fill:#fcc,stroke:#333,stroke-width:1px
    style E fill:#cec,stroke:#333,stroke-width:1px
    style F fill:#ffc,stroke:#333,stroke-width:1px
    style G fill:#bbf,stroke:#333,stroke-width:2px
    style H fill:#fcc,stroke:#333,stroke-width:1px
    style I fill:#f9f,stroke:#333,stroke-width:2px
                        </div>
                    </div>

                    <div class="example-section" data-source-line="280">
                        <h4>S3 流程說明</h4>
                        <ol data-source-line="282">
                            <li><span class="blue-emphasis">使用者手動觸發睡眠：</span> 使用者明確地發出指令，告訴電腦進入睡眠模式，例如按下電源按鈕或關閉筆記型電腦螢幕蓋。</li>
                            <li><span class="green-emphasis">系統進入 S3 狀態：</span> 電腦開始執行 S3 暫停程序。</li>
                            <li><span class="purple-emphasis">記憶體保持供電：</span> 系統的記憶體 (RAM) 仍然保持供電，以保存當前的系統狀態和所有開啟的應用程式資料。</li>
                            <li><span class="orange-emphasis">除記憶體外，所有其他組件斷電：</span> 這是一種「重手 (heavy-handed)」的方法，除了記憶體之外，幾乎所有其他硬體組件（如 CPU、風扇、硬碟等）都會被斷電或進入深度低功耗狀態。</li>
                            <li><span class="red-emphasis">系統進入低功耗狀態：</span> 由於大部分組件斷電，系統總體功耗顯著降低，但非零，因為記憶體仍需維持供電。</li>
                            <li><span class="highlight">等待喚醒事件：</span> 系統處於低功耗狀態，等待特定的喚醒事件發生。</li>
                            <li><span class="blue-emphasis">系統從記憶體恢復狀態：</span> 一旦喚醒事件被偵測到，系統會從記憶體中讀取保存的狀態。</li>
                            <li><span class="green-emphasis">所有斷電組件恢復供電/功能：</span> 被斷電的硬體組件重新獲得供電並重新初始化。</li>
                            <li><span class="purple-emphasis">系統恢復工作狀態：</span> 電腦快速恢復到使用者觸發睡眠前的狀態，「就像只是工作一樣」，所有應用程式和數據都恢復原樣。</li>
                        </ol>
                    </div>
                </div>

                <!-- S3 與 S0ix 比較表格 -->
                <div class="detailed-section" data-source-line="294">
                    <h3 id="comparison-table" data-source-line="294">📋 S3 與 S0ix (現代待機) 模式比較表</h3>

                    <div class="card" data-source-line="296">
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                                <thead>
                                    <tr style="background-color: rgba(102, 126, 234, 0.1);">
                                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">特性 / 模式</th>
                                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">ACPI S3 (Suspend-to-RAM)</th>
                                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">S0ix (S0i3/S0ax, 現代待機)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>核心概念</strong></td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">系統將狀態儲存於記憶體，除記憶體外，幾乎所有組件斷電。</td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">系統邏輯上保持在 S0 (工作狀態)，由平台動態決定何時進入深度低功耗狀態並關閉 CPU。</td>
                                    </tr>
                                    <tr style="background-color: rgba(0, 0, 0, 0.02);">
                                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>進入觸發方式</strong></td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">使用者手動指令 (如按電源鈕、關螢幕蓋) 啟動。</td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">使用者手動指令 (如按電源鈕、關螢幕蓋) 啟動 S2idle 流程。</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>功耗</strong></td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">較低，但非零 (記憶體供電)。</td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">預期與 S3 相同，較低，但非零 (記憶體供電)。目標是實現「節省最多電力」狀態。</td>
                                    </tr>
                                    <tr style="background-color: rgba(0, 0, 0, 0.02);">
                                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>進入/退出速度</strong></td>
                                        <td style="border: 1px solid #ddd; padding: 12px;"><span class="red-emphasis">慢</span>，且不靈活。</td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">理論上應<span class="green-emphasis">更快、更靈活</span>，旨在解決 S3 的速度問題。</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>硬體支援</strong></td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">許多<span class="red-emphasis">現代筆記型電腦已不再支援</span>。</td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">專為<span class="blue-emphasis">現代筆記型電腦硬體</span>設計，如較新的 AMD Frameworks 和最新的 Intel Frameworks。</td>
                                    </tr>
                                    <tr style="background-color: rgba(0, 0, 0, 0.02);">
                                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>複雜週邊支援</strong></td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">對 USB4 等現代介面無特別說明。</td>
                                        <td style="border: 1px solid #ddd; padding: 12px;">需要專門的<span class="purple-emphasis">USB4 連線管理器</span>來確保 USB4 路由器進入睡眠狀態，這是一個複雜的挑戰。</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="key-point" data-source-line="309">
                        <p data-source-line="309"><span class="highlight">總結來說</span>，雖然 S3 和 S0ix (S0i3) 在最終的功耗水平上目標相似（都將系統暫停到記憶體），但它們實現這個目標的方式截然不同。S3 是一種由作業系統直接控制、相對「粗暴」的傳統方法，其進入和退出速度慢且不靈活，已不被現代硬體支援。而 S0ix 則是由平台智慧協調的現代解決方案，旨在提供更精細、更快速、更高效的睡眠體驗，以適應現代筆記型電腦的設計。然而，這也帶來了更複雜的實現挑戰，特別是在與各類現代硬體（如 AMD SMU 和 USB4）的深度整合方面。</p>
                    </div>
                </div>

                <!-- USB4 整合：S0ix 實現的關鍵障礙與進展 -->
                <div class="detailed-section" data-source-line="203">
                    <h3 id="usb4-integration" data-source-line="203">🔌 USB4 整合：S0ix 實現的關鍵障礙與進展</h3>

                    <div class="card" data-source-line="205">
                        <p data-source-line="205"><span class="purple-emphasis">USB4 (Universal Serial Bus 4)</span> 的支援是 S0ix 在現代筆記型電腦上成功的關鍵環節，同時也是最具挑戰性的部分。USB4 是一種高度複雜的技術，它不僅是 USB 3.2 的演進，更重要的是能夠「隧道化」其他協議，如 DisplayPort 和 PCI Express。這意味著一個 USB-C 連接埠可能同時處理數據、視訊和 PCI Express 流量。</p>
                    </div>

                    <div class="example-section" data-source-line="207">
                        <p data-source-line="207">問題的根源在於，筆記型電腦的 BIOS 通常包含一個 <span class="blue-emphasis">Pre-OS 連線管理器 (Pre-OS Connection Manager)</span>，它會在作業系統啟動之前初始化 USB4 路由器，使其在 BIOS 環境中可用。然而，這導致作業系統啟動時，USB4 路由器可能不會處於所需的低功耗 D3 狀態，從而阻止 S0ix 進入。</p>
                    </div>

                    <div class="example-section" data-source-line="209">
                        <p data-source-line="209">為此，FreeBSD 需要一個全新的 USB4 連線管理器。開發者繼承了 Scott Long 的骨架程式碼，並將其發展為完全由作業系統端控制的 <span class="highlight">HTM (Host Connection Manager)</span>，摒棄了舊的、因控制器差異大而複雜的內部連線管理器 (ICM)。</p>
                    </div>

                    <div class="card" data-source-line="211">
                        <p data-source-line="211">將 USB4 路由器置於睡眠狀態的過程相對直接：透過在路由器的配置空間中設定 <span class="red-emphasis">SLP bit (睡眠位元)</span>，然後等待 <span class="green-emphasis">Sleep Ready bit (睡眠就緒位元)</span> 設定來確認路由器已進入睡眠。目前，這項工作已成功實施，使得 SMU 能夠報告 USB4 相關裝置已進入低功耗狀態，並允許系統進入 S0i3。然而，當前僅支援 Pink Sardine 控制器（AMD 7000 系列筆記型電腦中的控制器），需要進一步擴展以支援更多通用控制器。</p>
                    </div>
                </div>

                <!-- S0ix 在 FreeBSD 上的挑戰與未來展望 -->
                <div class="detailed-section" data-source-line="213">
                    <h3 id="challenges-future" data-source-line="213">⚠️ S0ix 在 FreeBSD 上的挑戰與未來展望</h3>

                    <div class="card" data-source-line="215">
                        <p data-source-line="215">儘管取得顯著進展，FreeBSD 上的 S0ix 實施仍面臨多重挑戰和限制：</p>
                    </div>

                    <div class="example-section" data-source-line="217">
                        <h4>🔧 當前挑戰</h4>
                        <ol data-source-line="217">
                            <li><span class="red-emphasis">穩定性問題：</span> 該功能目前仍處於高度不穩定狀態，特別是 USB4 相關的程式碼，會導致頻繁的隨機核心恐慌。演示中筆記型電腦的多次核心恐慌，也印證了這一點。</li>
                            <li><span class="orange-emphasis">喚醒後無法重新進入睡眠：</span> 一個關鍵問題是，USB4 路由器在系統從睡眠中喚醒後，無法重新進入睡眠狀態。開發者正在積極修復此問題。</li>
                            <li><span class="purple-emphasis">Intel 平台支援：</span> 目前的工作主要集中在 AMD 平台上。Intel 平台的 S0ix 支援尚未全面展開，儘管可能部分功能可以運行，但仍需進一步驗證和開發。</li>
                            <li><span class="blue-emphasis">複雜喚醒規則：</span> 尚未提供使用者配置複雜喚醒規則的能力，例如指定哪些裝置可以喚醒系統，或在特定條件下（如插入特定裝置）是否允許喚醒。</li>
                            <li><span class="green-emphasis">S4 (Suspend-to-Disk / 休眠)：</span> 儘管 S0ix (S0i3) 可以節省大量電力，但記憶體仍需通電。S4 (休眠) 模式可以將記憶體內容寫入磁碟，然後完全關閉系統，實現零功耗，但其進入和退出時間會更長。未來的工作目標是在系統長時間處於 S0i3 狀態後，自動過渡到 S4，以實現更極致的節能。</li>
                            <li><span class="highlight">通用擴充座和熱插拔支援：</span> 目前的 USB4 支援僅足以初始化路由器並將其置於睡眠狀態。要實現對通用 USB-C 或 Thunderbolt 擴充座（支援 DisplayPort、USB 和 PCI Express 隧道化）以及 PCIe 熱插拔/拔出的完整支援，還需要「大量」開發工作。</li>
                            <li><span class="blue-emphasis">工具生態系統：</span> 為了更好地診斷和優化功耗，有計劃將 Linux 上的功耗分析工具 Powertop 移植到 FreeBSD。</li>
                        </ol>
                    </div>

                    <div class="key-point" data-source-line="225">
                        <p data-source-line="225">總而言之，FreeBSD 在現代筆記型電腦上實現 S0ix 的道路充滿挑戰，但每一步的進展都為使用者帶來了更佳的體驗和更廣闊的硬體支援。該項目作為 FreeBSD 基金會筆記型電腦項目的一部分，其持續發展對於 FreeBSD 的未來至關重要。</p>
                    </div>
                </div>

                <!-- 術語定義 -->
                <div class="detailed-section" data-source-line="227">
                    <h3 id="terminology" data-source-line="227">📚 術語定義 (首次使用時)</h3>

                    <div class="example-section" data-source-line="228">
                        <div class="column-layout">
                            <div class="column">
                                <ul>
                                    <li data-source-line="228"><span class="blue-emphasis">ACPI (Advanced Configuration and Power Interface，高級配置與電源介面):</span> 平台用於暴露硬體資訊的配置語言。</li>
                                    <li data-source-line="229"><span class="green-emphasis">S0 (Working State，工作狀態):</span> 電腦正在運行的狀態。</li>
                                    <li data-source-line="230"><span class="purple-emphasis">S5 (Soft Off State，軟關機狀態):</span> 電腦關閉的狀態。</li>
                                    <li data-source-line="231"><span class="orange-emphasis">S0ix (S0i3/S0ax，現代待機):</span> 一種現代待機模式，系統保持在 S0 運行狀態，由平台決定何時滿足要求進入低功耗狀態並關閉 CPU。</li>
                                    <li data-source-line="232"><span class="red-emphasis">AML (ACPI Machine Language):</span> ACPI 設定語言的一種格式，用於描述硬體資訊。</li>
                                    <li data-source-line="233"><span class="highlight">ASL (ACPI Source Language):</span> ACPI 設定語言的原始碼格式，可被編譯成 AML。</li>
                                    <li data-source-line="234"><span class="blue-emphasis">SPMC (System Power Management Controller，系統電源管理控制器):</span> 在 S0ax 中，SPMC 透過內嵌控制器 (EC) 通知系統進入或退出睡眠。</li>
                                    <li data-source-line="235"><span class="green-emphasis">D-states (Device Power States，裝置電源狀態):</span> 裝置的功耗狀態。D0 表示裝置開啟；D1、D2 和 D3ish 表示裝置部分或完全關閉。</li>
                                    <li data-source-line="236"><span class="purple-emphasis">Power Resources (電源資源):</span> ACPI 中用於控制裝置 D-state 的機制。</li>
                                    <li data-source-line="237"><span class="orange-emphasis">S2idle (Suspend to Idle，暫停到閒置):</span> 讓 CPU 進入閒置狀態，等待平台通知喚醒。</li>
                                    <li data-source-line="238"><span class="red-emphasis">SCI (System Control Interrupt，系統控制中斷):</span> 平台用於通知作業系統喚醒事件的特定中斷。</li>
                                    <li data-source-line="239"><span class="highlight">C-states (CPU Power States，CPU 電源狀態):</span> CPU 的閒置狀態。C0 表示活動狀態；C1 表示使用 `HLT` 指令停止 CPU 直到下一個中斷。</li>
                                </ul>
                            </div>
                            <div class="column">
                                <ul>
                                    <li data-source-line="240"><span class="blue-emphasis">MWAIT instruction (MWAIT 指令):</span> 理論上用於暫停 CPU 直到特定記憶體被寫入或收到中斷，並可提供 C-state 提示。</li>
                                    <li data-source-line="241"><span class="green-emphasis">AMD SMU (System Management Unit，系統管理單元):</span> AMD CPU 中的一個小部分，運行 PMFW (Power Management Firmware)，負責 CPU 的電源管理並決定何時進入 S0i3。</li>
                                    <li data-source-line="242"><span class="purple-emphasis">PMFW (Power Management Firmware，電源管理韌體):</span> 運行在 AMD SMU 上的韌體，負責電源管理。</li>
                                    <li data-source-line="243"><span class="orange-emphasis">Residency (駐留時間):</span> 系統在特定狀態下花費的時間，對於確認是否進入 S0i3 非常有用。</li>
                                    <li data-source-line="244"><span class="red-emphasis">LPIs (Low Power Idle States，低功耗閒置狀態):</span> 與 C-states 類似，用於描述 CPU 的低功耗狀態，某些較新的系統採用 LPIs 而非 CSTs。</li>
                                    <li data-source-line="245"><span class="highlight">CST object (CST 物件):</span> ACPI 中描述 CPU 支援的 C-states 及其進入方法的物件。</li>
                                    <li data-source-line="246"><span class="blue-emphasis">USB4 (Universal Serial Bus 4):</span> 一種先進的介面標準，用於隧道化其他協議，如 USB 3.2、DisplayPort 和 PCI Express。</li>
                                    <li data-source-line="247"><span class="green-emphasis">Host Router (主機路由器):</span> USB4 網路中的中央元件，負責路由和管理不同協議的數據流。</li>
                                    <li data-source-line="248"><span class="purple-emphasis">Pre-OS Connection Manager (Pre-OS 連線管理器):</span> BIOS 中用於 USB4 在 BIOS 運行時工作的機制。</li>
                                    <li data-source-line="249"><span class="orange-emphasis">SLP bit (Sleep bit，睡眠位元):</span> 在 USB4 路由器配置空間中設定以指示其進入睡眠的位元。</li>
                                    <li data-source-line="250"><span class="red-emphasis">Sleep Ready bit (Sleep Ready 位元):</span> 在 USB4 路由器配置空間中，設定後表示路由器已進入睡眠狀態的位元。</li>
                                    <li data-source-line="251"><span class="highlight">S4 (Suspend-to-Disk / Hibernate，暫停到磁碟/休眠):</span> 將記憶體內容複製到磁碟，然後完全關閉系統，實現零功耗，但恢復時間較長。</li>
                                    <li data-source-line="252"><span class="blue-emphasis">Powertop:</span> 一個 Linux 工具，用於顯示所有行程的功耗細目，目標是移植到 FreeBSD。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

        </main>
    </div>

    <script src="../assets/js/layout.js"></script>
</body>
</html>
